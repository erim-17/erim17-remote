<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🚀 ASFAT Remote - CANLI</title>
    <style>
        /* CSS kodu buraya (önceki gibi) */
    </style>
</head>
<body>
    <div class="container">
        <!-- Arayüz buraya -->
    </div>

    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <script>
        const SERVER_URL = 'https://asfat-remote-backend.onrender.com';
        let socket = null;
        let currentRoom = null;
        
        // Socket bağlantısı
        function connect() {
            socket = io(SERVER_URL);
            
            socket.on('connect', () => {
                console.log('✅ Backend\'e bağlandı');
            });
            
            // YENİ EVENT'LER
            socket.on('room-joined', (data) => {
                console.log('Odaya katıldı:', data);
            });
            
            socket.on('receive-screen-data', (data) => {
                // Ekran verisini göster
                document.getElementById('remoteScreen').src = data.imageData;
            });
            
            socket.on('new-message', (data) => {
                console.log('Yeni mesaj:', data);
            });
        }
        
        // Odaya katıl
        function joinRoom() {
            const roomId = document.getElementById('roomId').value;
            const username = document.getElementById('username').value || 'User';
            
            socket.emit('join-room', roomId, username);
            currentRoom = roomId;
        }
        
        // Ekran paylaş
        async function shareScreen() {
            // Ekranı al
            const stream = await navigator.mediaDevices.getDisplayMedia({
                video: true
            });
            
            // Backend'e bildir
            socket.emit('start-screen-share', currentRoom);
            
            // Ekranı yakala ve gönder
            setInterval(() => {
                // Ekranı yakala ve base64'e çevir
                // socket.emit('send-screen-data', {...})
            }, 100);
        }
        
        // Sayfa yüklendiğinde
        window.onload = connect;
    </script>
</body>
</html>
